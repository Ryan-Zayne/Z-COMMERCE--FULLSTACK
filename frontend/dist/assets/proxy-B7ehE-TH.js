import{r,K as R,M as E,P as L,Q as _,U as I,V as q,j,W as z,X as b,Y as X,Z as Y,_ as D,$ as F,a0 as p,a1 as K,a2 as Q,a3 as Z,a4 as J,a5 as tt,a6 as et,a7 as nt,a8 as v,a9 as ot,aa as at}from"./index-CtoIyiXC.js";const rt=r.createContext({});function it(t){const e=r.useRef(null);return e.current===null&&(e.current=t()),e.current}const st=R?r.useLayoutEffect:r.useEffect,W=r.createContext(null),G=r.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),ut=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function P(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||ut.has(t)}let O=t=>!P(t);function ct(t){t&&(O=e=>e.startsWith("on")?!P(e):t(e))}try{ct(require("@emotion/is-prop-valid").default)}catch{}function lt(t,e,n){const o={};for(const a in t)a==="values"&&typeof t.values=="object"||(O(a)||n===!0&&P(a)||!e&&!P(a)||t.draggable&&a.startsWith("onDrag"))&&(o[a]=t[a]);return o}function ft(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...o)=>t(...o);return new Proxy(n,{get:(o,a)=>a==="create"?t:(e.has(a)||e.set(a,t(a)),e.get(a))})}const S=r.createContext({});function dt(t,e){if(E(t)){const{initial:n,animate:o}=t;return{initial:n===!1||L(n)?n:void 0,animate:L(o)?o:void 0}}return t.inherit!==!1?e:{}}function mt(t){const{initial:e,animate:n}=dt(t,r.useContext(S));return r.useMemo(()=>({initial:e,animate:n}),[A(e),A(n)])}function A(t){return Array.isArray(t)?t.join(" "):t}const yt=Symbol.for("motionComponentSymbol");function k(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function gt(t,e,n){return r.useCallback(o=>{o&&t.onMount&&t.onMount(o),e&&(o?e.mount(o):e.unmount()),n&&(typeof n=="function"?n(o):k(n)&&(n.current=o))},[e])}const Mt=r.createContext({}),{schedule:Ct}=_(queueMicrotask,!1);function ht(t,e,n,o,a){var C,V;const{visualElement:i}=r.useContext(S),c=r.useContext(I),u=r.useContext(W),m=r.useContext(G).reducedMotion,d=r.useRef(null);o=o||c.renderer,!d.current&&o&&(d.current=o(t,{visualState:e,parent:i,props:n,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:m}));const s=d.current,l=r.useContext(Mt);s&&!s.projection&&a&&(s.type==="html"||s.type==="svg")&&xt(d.current,n,a,l);const f=r.useRef(!1);r.useInsertionEffect(()=>{s&&f.current&&s.update(n,u)});const y=n[q],g=r.useRef(!!y&&!((C=window.MotionHandoffIsComplete)!=null&&C.call(window,y))&&((V=window.MotionHasOptimisedAnimation)==null?void 0:V.call(window,y)));return st(()=>{s&&(f.current=!0,window.MotionIsMounted=!0,s.updateFeatures(),Ct.render(s.render),g.current&&s.animationState&&s.animationState.animateChanges())}),r.useEffect(()=>{s&&(!g.current&&s.animationState&&s.animationState.animateChanges(),g.current&&(queueMicrotask(()=>{var h;(h=window.MotionHandoffMarkAsComplete)==null||h.call(window,y)}),g.current=!1))}),s}function xt(t,e,n,o){const{layoutId:a,layout:i,drag:c,dragConstraints:u,layoutScroll:m,layoutRoot:d,layoutCrossfade:s}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:H(t.parent)),t.projection.setOptions({layoutId:a,layout:i,alwaysMeasureLayout:!!c||u&&k(u),visualElement:t,animationType:typeof i=="string"?i:"both",initialPromotionConfig:o,crossfade:s,layoutScroll:m,layoutRoot:d})}function H(t){if(t)return t.options.allowProjection!==!1?t.projection:H(t.parent)}function Pt({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:o,Component:a}){function i(u,m){let d;const s={...r.useContext(G),...u,layoutId:St(u)},{isStatic:l}=s,f=mt(u),y=o(u,l);if(!l&&R){Vt();const g=bt(s);d=g.MeasureLayout,f.visualElement=ht(a,y,s,e,g.ProjectionNode)}return j.jsxs(S.Provider,{value:f,children:[d&&f.visualElement?j.jsx(d,{visualElement:f.visualElement,...s}):null,n(a,u,gt(y,f.visualElement,m),y,l,f.visualElement)]})}i.displayName=`motion.${typeof a=="string"?a:`create(${a.displayName??a.name??""})`}`;const c=r.forwardRef(i);return c[yt]=a,c}function St({layoutId:t}){const e=r.useContext(rt).id;return e&&t!==void 0?e+"-"+t:t}function Vt(t,e){r.useContext(I).strict}function bt(t){const{drag:e,layout:n}=z;if(!e&&!n)return{};const o={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?o.MeasureLayout:void 0,ProjectionNode:o.ProjectionNode}}const w=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function N(t,e,n){for(const o in e)!b(e[o])&&!X(o,n)&&(t[o]=e[o])}function wt({transformTemplate:t},e){return r.useMemo(()=>{const n=w();return Y(n,e,t),Object.assign({},n.vars,n.style)},[e])}function Lt(t,e){const n=t.style||{},o={};return N(o,n,t),Object.assign(o,wt(t,e)),o}function jt(t,e){const n={},o=Lt(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,o.userSelect=o.WebkitUserSelect=o.WebkitTouchCallout="none",o.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=o,n}const $=()=>({...w(),attrs:{}});function vt(t,e,n,o){const a=r.useMemo(()=>{const i=$();return D(i,e,F(o),t.transformTemplate),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};N(i,t.style,t),a.style={...i,...a.style}}return a}function At(t=!1){return(n,o,a,{latestValues:i},c)=>{const m=(p(n)?vt:jt)(o,i,c,n),d=lt(o,typeof n=="string",t),s=n!==r.Fragment?{...d,...m,ref:a}:{},{children:l}=o,f=r.useMemo(()=>b(l)?l.get():l,[l]);return r.createElement(n,{...s,children:f})}}function Tt(t){const e=b(t)?t.get():t;return K(e)?e.toValue():e}function Rt({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},o,a,i){const c={latestValues:Et(o,a,i,t),renderState:e()};return n&&(c.onMount=u=>n({props:o,current:u,...c}),c.onUpdate=u=>n(u)),c}const B=t=>(e,n)=>{const o=r.useContext(S),a=r.useContext(W),i=()=>Rt(t,e,o,a);return n?i():it(i)};function Et(t,e,n,o){const a={},i=o(t,{});for(const f in i)a[f]=Tt(i[f]);let{initial:c,animate:u}=t;const m=E(t),d=Q(t);e&&d&&!m&&t.inherit!==!1&&(c===void 0&&(c=e.initial),u===void 0&&(u=e.animate));let s=n?n.initial===!1:!1;s=s||c===!1;const l=s?u:c;if(l&&typeof l!="boolean"&&!Z(l)){const f=Array.isArray(l)?l:[l];for(let y=0;y<f.length;y++){const g=J(t,f[y]);if(g){const{transitionEnd:C,transition:V,...h}=g;for(const x in h){let M=h[x];if(Array.isArray(M)){const U=s?M.length-1:0;M=M[U]}M!==null&&(a[x]=M)}for(const x in C)a[x]=C[x]}}}return a}const It={useVisualState:B({scrapeMotionValuesFromProps:tt,createRenderState:w})},T=["x","y","width","height","cx","cy","r"],Dt={useVisualState:B({scrapeMotionValuesFromProps:et,createRenderState:$,onUpdate:({props:t,prevProps:e,current:n,renderState:o,latestValues:a})=>{if(!n)return;let i=!!t.drag;if(!i){for(const u in a)if(nt.has(u)){i=!0;break}}if(!i)return;let c=!e;if(e)for(let u=0;u<T.length;u++){const m=T[u];t[m]!==e[m]&&(c=!0)}c&&v.read(()=>{ot(n,o),v.render(()=>{D(o,a,F(n.tagName),t.transformTemplate),at(n,o)})})}})};function Ft(t,e){return function(o,{forwardMotionProps:a}={forwardMotionProps:!1}){const c={...p(o)?Dt:It,preloadedFeatures:t,useRender:At(a),createVisualElement:e,Component:o};return Pt(c)}}const pt=Ft(),Gt=ft(pt);export{rt as L,G as M,W as P,st as a,Gt as m,it as u};
