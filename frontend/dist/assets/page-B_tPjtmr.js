import"./suspense-CFbDoGTd.js";import{b as e}from"./useQuery-CaicZ3S1.js";import{b as t,c as n,d as r,f as i,g as a,h as o}from"./form-6RV0u4YT-C0s0nzct.js";import{ai as s,aq as c,ax as l,c as u,g as d,h as f,y as p}from"./index-Bp9otwrI.js";import"./cn-BoQlC4G6.js";import{b as m}from"./ImageComponent-Bc0o9aFc.js";import{b as h}from"./button-BPLquIxT.js";import{b as g}from"./for-aTw1TgJo-CDEpiS0u.js";import"./getSlot-D1_uG-Ym-BWyZ8xjg.js";import"./cn-_FbtIrlZ-uphoaSN2.js";import"./hooks-cJL0eNIo-BcqT2mJW.js";import{b as _}from"./shopStore-CQoUQPiF.js";var v=l(s());const y=i({address:a().min(10,`Please enter your full address`),city:a().min(2,`Please enter your city`),country:a().min(2,`Please enter your country`),email:o(`Please enter a valid email`),username:a().min(1,`Username is required`),zipCode:a().min(4,`Please enter a valid zip code`)}),[b]=g();function x(){let i=_(e=>e.cart),a=_(e=>e.totalPrice),o=_(e=>e.actions),s=p(),l=e(u()),g=r({resolver:n(y),values:{address:``,city:``,country:``,email:l.data?.data?.user.email??``,username:l.data?.data?.user.username??``,zipCode:``}}),{control:x}=g,S=g.handleSubmit(async e=>{let t={amount:a,cartItems:i.map(e=>({id:String(e.id),name:e.title,price:e.price,quantity:e.quantity})),customerEmail:e.email,customerId:l.data?.data?.user.id??``,redirectURL:`${window.location.origin}/checkout/success`},n=await d(`/payment/paystack/initialize`,{body:t,method:`POST`});if(f(n.error)){g.setError(`root.serverError`,{message:n.error.errorData.message});return}if(n.error){g.setError(`root.caughtError`,{message:n.error.message});return}o.clearCart(),c(n.data.data?.paymentUrl)});return i.length===0?(0,v.jsxs)(`main`,{className:`mx-auto max-w-[1200px] px-[16px] py-[20px] md:px-[30px] md:py-[30px]`,children:[(0,v.jsx)(`header`,{className:`flex items-center justify-between border-b pb-[16px] md:pb-[20px]`,children:(0,v.jsx)(`h1`,{className:`text-[25px] font-bold md:text-[32px]`,children:`Checkout`})}),(0,v.jsxs)(`div`,{className:`mt-[30px] flex flex-col items-center justify-center gap-[20px] text-center`,children:[(0,v.jsx)(`p`,{className:`text-[18px] font-medium text-gray-400`,children:`Your cart is empty`}),(0,v.jsx)(h,{theme:`primary`,className:`rounded-[4px] bg-navbar px-[20px] py-[10px] text-[16px] font-medium text-white\r
							transition-all hover:bg-primary`,onClick:()=>void s(`/`),children:`Continue Shopping`})]})]}):(0,v.jsxs)(`main`,{className:`mx-auto max-w-[1200px] px-[16px] py-[20px] md:px-[30px] md:py-[30px]`,children:[(0,v.jsx)(`header`,{className:`flex items-center justify-between border-b pb-[16px] md:pb-[20px]`,children:(0,v.jsx)(`h1`,{className:`text-[25px] font-bold md:text-[32px]`,children:`Checkout`})}),(0,v.jsxs)(`section`,{className:`mx-auto mt-[20px] flex max-w-[1200px] flex-col gap-[30px] px-[20px] md:mt-[30px]\r
					md:flex-row md:items-center md:gap-[40px]`,children:[(0,v.jsx)(t.Root,{methods:g,className:`w-full gap-[24px]`,onSubmit:e=>void S(e),children:(0,v.jsxs)(`div`,{className:`grid gap-[24px] md:grid-cols-2 md:gap-[20px]`,children:[(0,v.jsx)(`div`,{className:`md:col-span-2`,children:(0,v.jsxs)(t.Field,{control:x,name:`username`,children:[(0,v.jsx)(t.Label,{className:`text-[15px] font-medium tracking-tight md:text-[16px]`,children:`Username`}),(0,v.jsx)(t.Input,{classNames:{error:`border-b-error focus-within:border-b-error
										dark:focus-within:border-b-error`,input:`min-h-[40px] rounded-[4px] border border-carousel-btn bg-transparent
										px-[12px] text-[14px] text-input transition-colors duration-200
										placeholder:text-gray-400 focus-within:border-navbar md:min-h-[44px]
										md:text-[16px] dark:focus-within:border-carousel-dot`},placeholder:`John Doe`}),(0,v.jsx)(t.ErrorMessage,{className:`mt-[4px] text-[13px] text-error md:text-[14px]`})]})}),(0,v.jsx)(`div`,{className:`md:col-span-2`,children:(0,v.jsxs)(t.Field,{control:x,name:`email`,children:[(0,v.jsx)(t.Label,{className:`text-[15px] font-medium tracking-tight md:text-[16px]`,children:`Email`}),(0,v.jsx)(t.Input,{classNames:{error:`border-b-error focus-within:border-b-error
										dark:focus-within:border-b-error`,input:`min-h-[40px] rounded-[4px] border border-carousel-btn bg-transparent
										px-[12px] text-[14px] text-input transition-colors duration-200
										placeholder:text-gray-400 focus-within:border-navbar md:min-h-[44px]
										md:text-[16px] dark:focus-within:border-carousel-dot`},placeholder:`johndoe@example.com`}),(0,v.jsx)(t.ErrorMessage,{className:`mt-[4px] text-[13px] text-error md:text-[14px]`})]})}),(0,v.jsx)(`div`,{className:`md:col-span-2`,children:(0,v.jsxs)(t.Field,{control:x,name:`address`,children:[(0,v.jsx)(t.Label,{className:`text-[15px] font-medium tracking-tight md:text-[16px]`,children:`Address`}),(0,v.jsx)(t.Input,{classNames:{error:`border-b-error focus-within:border-b-error
										dark:focus-within:border-b-error`,input:`min-h-[40px] rounded-[4px] border border-carousel-btn bg-transparent
										px-[12px] text-[14px] text-input transition-colors duration-200
										placeholder:text-gray-400 focus-within:border-navbar md:min-h-[44px]
										md:text-[16px] dark:focus-within:border-carousel-dot`},placeholder:`123 Main St`}),(0,v.jsx)(t.ErrorMessage,{className:`mt-[4px] text-[13px] text-error md:text-[14px]`})]})}),(0,v.jsx)(`div`,{children:(0,v.jsxs)(t.Field,{control:x,name:`city`,children:[(0,v.jsx)(t.Label,{className:`text-[15px] font-medium tracking-tight md:text-[16px]`,children:`City`}),(0,v.jsx)(t.Input,{classNames:{error:`border-b-error focus-within:border-b-error
										dark:focus-within:border-b-error`,input:`min-h-[40px] rounded-[4px] border border-carousel-btn bg-transparent
										px-[12px] text-[14px] text-input transition-colors duration-200
										placeholder:text-gray-400 focus-within:border-navbar md:min-h-[44px]
										md:text-[16px] dark:focus-within:border-carousel-dot`},placeholder:`New York`}),(0,v.jsx)(t.ErrorMessage,{className:`mt-[4px] text-[13px] text-error md:text-[14px]`})]})}),(0,v.jsx)(`div`,{children:(0,v.jsxs)(t.Field,{control:x,name:`country`,className:`text-[15px] md:text-[16px]`,children:[(0,v.jsx)(t.Label,{className:`text-[15px] font-medium tracking-tight md:text-[16px]`,children:`Country`}),(0,v.jsx)(t.Input,{classNames:{error:`border-b-error focus-within:border-b-error
										dark:focus-within:border-b-error`,input:`min-h-[40px] rounded-[4px] border border-carousel-btn bg-transparent
										px-[12px] text-[14px] text-input transition-colors duration-200
										placeholder:text-gray-400 focus-within:border-navbar md:min-h-[44px]
										md:text-[16px] dark:focus-within:border-carousel-dot`},placeholder:`United States`}),(0,v.jsx)(t.ErrorMessage,{className:`mt-[4px] text-[13px] text-error md:text-[14px]`})]})}),(0,v.jsx)(`div`,{children:(0,v.jsxs)(t.Field,{control:x,name:`zipCode`,children:[(0,v.jsx)(t.Label,{className:`text-[15px] font-medium tracking-tight md:text-[16px]`,children:`ZIP Code`}),(0,v.jsx)(t.Input,{classNames:{error:`border-b-error focus-within:border-b-error
										dark:focus-within:border-b-error`,input:`min-h-[40px] rounded-[4px] border border-carousel-btn bg-transparent
										px-[12px] text-[14px] text-input transition-colors duration-200
										placeholder:text-gray-400 focus-within:border-navbar md:min-h-[44px]
										md:text-[16px] dark:focus-within:border-carousel-dot`},placeholder:`10001`}),(0,v.jsx)(t.ErrorMessage,{className:`mt-[4px] text-[13px] text-error md:text-[14px]`})]})}),(0,v.jsx)(t.ErrorMessage,{className:`text-center text-[13px] font-medium text-error`,errorField:`caughtError`,type:`root`}),(0,v.jsx)(t.ErrorMessage,{className:`text-center text-[13px] text-error`,errorField:`serverError`,type:`root`}),(0,v.jsx)(t.SubscribeToFormState,{render:({isSubmitting:e})=>(0,v.jsx)(h,{type:`submit`,theme:`primary`,disabled:e,isLoading:e,className:`mt-[20px] h-[44px] w-full rounded-[4px] bg-navbar text-[15px]\r
										font-semibold text-white shadow-xs transition-all hover:bg-primary\r
										hover:shadow-md active:scale-[0.98] disabled:cursor-not-allowed\r
										disabled:brightness-75 md:mt-[24px] md:rounded-[10px] md:text-[16px]`,children:`Place Order`})})]})}),(0,v.jsxs)(`aside`,{className:`rounded-[4px] bg-[#1c2128] p-[20px] md:w-[500px]`,children:[(0,v.jsx)(`h2`,{className:`mb-[20px] text-[18px] font-semibold`,children:`Order Summary`}),(0,v.jsxs)(`div`,{className:`flex flex-col gap-[20px] divide-y divide-carousel-btn`,children:[(0,v.jsx)(b,{each:i,render:e=>(0,v.jsxs)(`li`,{className:`flex gap-[16px] pt-[20px]`,children:[(0,v.jsx)(`div`,{className:`size-[70px] shrink-0 overflow-hidden rounded-[4px] bg-gray-800`,children:(0,v.jsx)(m,{src:e.images[0],alt:e.title,className:`size-full object-cover`})}),(0,v.jsxs)(`div`,{className:`flex flex-1 justify-between gap-[10px]`,children:[(0,v.jsxs)(`div`,{children:[(0,v.jsx)(`h3`,{className:`text-[15px] leading-tight font-medium`,children:e.title}),(0,v.jsxs)(`p`,{className:`mt-[4px] text-[13px] text-gray-400`,children:[`Quantity: `,e.quantity]})]}),(0,v.jsxs)(`p`,{className:`shrink-0 text-[15px] font-medium`,children:[`$`,e.price.toLocaleString()]})]})]},e.id)}),(0,v.jsxs)(`div`,{className:`flex items-center justify-between pt-[20px] text-base font-semibold`,children:[(0,v.jsx)(`p`,{children:`Total`}),(0,v.jsxs)(`p`,{children:[`$`,a.toLocaleString()]})]})]})]})]})]})}var S=x;export{S as default};