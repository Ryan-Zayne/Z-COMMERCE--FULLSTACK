import{k as N,E as w,F as v,G as k,j as e,s as E}from"./index-BOJgmFrE.js";import{I as C}from"./ImageComponent-4wTOK46g.js";import{B as b}from"./button-Da2CqLbU.js";import{u as S,f as r,s as I,z as s}from"./index-CBvX1ng2.js";import{u as g}from"./shopStore-CPtKkN-x.js";import{u as L}from"./useQuery-CysWkk5Y.js";import{g as F}from"./chunk-DW3FXTFL-CIlnShzR.js";import"./cn-BORkeZql.js";import"./chunk-OHG7GB7O-Di8wXTmC.js";import"./chunk-PZ5AY32C-DghNgBBa.js";import"./suspense-D5blzfLH.js";const P=s.object({address:s.string().min(10,"Please enter your full address"),city:s.string().min(2,"Please enter your city"),country:s.string().min(2,"Please enter your country"),email:s.string().email("Please enter a valid email"),username:s.string().min(1,"Username is required"),zipCode:s.string().min(4,"Please enter a valid zip code")}),[M]=F();function Y(){var x,u;const i=g(t=>t.cart),f=g(t=>t.actions),j=N(),l=i.reduce((t,n)=>t+n.price*n.quantity,0),c=L(E()),m=S({resolver:I(P),values:{address:"",city:"",country:"",email:((x=c.data)==null?void 0:x.user.email)??"",username:((u=c.data)==null?void 0:u.user.username)??"",zipCode:""}}),{control:a}=m,y=m.handleSubmit(async t=>{var h,p;const n={amount:l,cartItems:i.map(d=>({id:String(d.id),name:d.title,price:d.price,quantity:d.quantity})),customerEmail:t.email,customerId:((h=c.data)==null?void 0:h.user.id)??"",redirectURL:`${window.location.origin}/checkout/success`},o=await w("/payment/paystack/initialize",{body:n,method:"POST"});if(v(o.error)){m.setError("root.serverError",{message:o.error.errorData.message});return}if(o.error){m.setError("root.caughtError",{message:o.error.message});return}f.clearCart(),k((p=o.data.data)==null?void 0:p.paymentUrl)});return i.length===0?e.jsxs("main",{className:"mx-auto max-w-[120rem] px-[1.6rem] py-[2rem] md:px-[4rem] md:py-[3rem]",children:[e.jsx("header",{className:"flex items-center justify-between border-b pb-[1.6rem] md:pb-[2rem]",children:e.jsx("h1",{className:"text-[2.4rem] font-[700] md:text-[3.2rem]",children:"Checkout"})}),e.jsxs("div",{className:"mt-[4rem] flex flex-col items-center justify-center gap-[2rem] text-center",children:[e.jsx("p",{className:"text-[1.8rem] font-[500] text-gray-400",children:"Your cart is empty"}),e.jsx(b,{theme:"primary",className:`rounded-[0.8rem] bg-navbar px-[2rem] py-[1rem] text-[1.6rem] font-[500]
							text-white transition-all hover:bg-primary`,onClick:()=>void j("/"),children:"Continue Shopping"})]})]}):e.jsxs("main",{className:"mx-auto max-w-[120rem] px-[1.6rem] py-[2rem] md:px-[4rem] md:py-[3rem]",children:[e.jsx("header",{className:"flex items-center justify-between border-b pb-[1.6rem] md:pb-[2rem]",children:e.jsx("h1",{className:"text-[2.4rem] font-[700] md:text-[3.2rem]",children:"Checkout"})}),e.jsxs("section",{className:`mx-auto mt-[2rem] flex max-w-[120rem] flex-col gap-[3rem] px-[2rem] md:mt-[4rem]
					md:flex-row md:items-center md:gap-[4rem]`,children:[e.jsx(r.Root,{methods:m,className:"w-full gap-[2.4rem]",onSubmit:t=>void y(t),children:e.jsxs("div",{className:"grid gap-[2.4rem] md:grid-cols-2 md:gap-[2rem]",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsxs(r.Field,{control:a,name:"username",children:[e.jsx(r.Label,{className:"text-[1.5rem] font-medium tracking-tight md:text-[1.6rem]",children:"Username"}),e.jsx(r.Input,{classNames:{error:`border-b-error focus-within:border-b-error
										dark:focus-within:border-b-error`,input:`min-h-[4rem] rounded-[0.8rem] border-[1px] border-carousel-btn
										bg-transparent px-[1.2rem] text-[1.4rem] text-input transition-colors
										duration-200 placeholder:text-gray-400 focus-within:border-navbar
										dark:focus-within:border-carousel-dot md:min-h-[4.4rem] md:text-[1.6rem]`},placeholder:"John Doe"}),e.jsx(r.ErrorMessage,{className:"mt-[0.4rem] text-[1.3rem] text-error md:text-[1.4rem]"})]})}),e.jsx("div",{className:"md:col-span-2",children:e.jsxs(r.Field,{control:a,name:"email",children:[e.jsx(r.Label,{className:"text-[1.5rem] font-medium tracking-tight md:text-[1.6rem]",children:"Email"}),e.jsx(r.Input,{classNames:{error:`border-b-error focus-within:border-b-error
										dark:focus-within:border-b-error`,input:`min-h-[4rem] rounded-[0.8rem] border-[1px] border-carousel-btn
										bg-transparent px-[1.2rem] text-[1.4rem] text-input transition-colors
										duration-200 placeholder:text-gray-400 focus-within:border-navbar
										dark:focus-within:border-carousel-dot md:min-h-[4.4rem] md:text-[1.6rem]`},placeholder:"johndoe@example.com"}),e.jsx(r.ErrorMessage,{className:"mt-[0.4rem] text-[1.3rem] text-error md:text-[1.4rem]"})]})}),e.jsx("div",{className:"md:col-span-2",children:e.jsxs(r.Field,{control:a,name:"address",children:[e.jsx(r.Label,{className:"text-[1.5rem] font-medium tracking-tight md:text-[1.6rem]",children:"Address"}),e.jsx(r.Input,{classNames:{error:`border-b-error focus-within:border-b-error
										dark:focus-within:border-b-error`,input:`min-h-[4rem] rounded-[0.8rem] border-[1px] border-carousel-btn
										bg-transparent px-[1.2rem] text-[1.4rem] text-input transition-colors
										duration-200 placeholder:text-gray-400 focus-within:border-navbar
										dark:focus-within:border-carousel-dot md:min-h-[4.4rem] md:text-[1.6rem]`},placeholder:"123 Main St"}),e.jsx(r.ErrorMessage,{className:"mt-[0.4rem] text-[1.3rem] text-error md:text-[1.4rem]"})]})}),e.jsx("div",{children:e.jsxs(r.Field,{control:a,name:"city",children:[e.jsx(r.Label,{className:"text-[1.5rem] font-medium tracking-tight md:text-[1.6rem]",children:"City"}),e.jsx(r.Input,{classNames:{error:`border-b-error focus-within:border-b-error
										dark:focus-within:border-b-error`,input:`min-h-[4rem] rounded-[0.8rem] border-[1px] border-carousel-btn
										bg-transparent px-[1.2rem] text-[1.4rem] text-input transition-colors
										duration-200 placeholder:text-gray-400 focus-within:border-navbar
										dark:focus-within:border-carousel-dot md:min-h-[4.4rem] md:text-[1.6rem]`},placeholder:"New York"}),e.jsx(r.ErrorMessage,{className:"mt-[0.4rem] text-[1.3rem] text-error md:text-[1.4rem]"})]})}),e.jsx("div",{children:e.jsxs(r.Field,{control:a,name:"country",className:"text-[1.5rem] md:text-[1.6rem]",children:[e.jsx(r.Label,{className:"text-[1.5rem] font-medium tracking-tight md:text-[1.6rem]",children:"Country"}),e.jsx(r.Input,{classNames:{error:`border-b-error focus-within:border-b-error
										dark:focus-within:border-b-error`,input:`min-h-[4rem] rounded-[0.8rem] border-[1px] border-carousel-btn
										bg-transparent px-[1.2rem] text-[1.4rem] text-input transition-colors
										duration-200 placeholder:text-gray-400 focus-within:border-navbar
										dark:focus-within:border-carousel-dot md:min-h-[4.4rem] md:text-[1.6rem]`},placeholder:"United States"}),e.jsx(r.ErrorMessage,{className:"mt-[0.4rem] text-[1.3rem] text-error md:text-[1.4rem]"})]})}),e.jsx("div",{children:e.jsxs(r.Field,{control:a,name:"zipCode",children:[e.jsx(r.Label,{className:"text-[1.5rem] font-medium tracking-tight md:text-[1.6rem]",children:"ZIP Code"}),e.jsx(r.Input,{classNames:{error:`border-b-error focus-within:border-b-error
										dark:focus-within:border-b-error`,input:`min-h-[4rem] rounded-[0.8rem] border-[1px] border-carousel-btn
										bg-transparent px-[1.2rem] text-[1.4rem] text-input transition-colors
										duration-200 placeholder:text-gray-400 focus-within:border-navbar
										dark:focus-within:border-carousel-dot md:min-h-[4.4rem] md:text-[1.6rem]`},placeholder:"10001"}),e.jsx(r.ErrorMessage,{className:"mt-[0.4rem] text-[1.3rem] text-error md:text-[1.4rem]"})]})}),e.jsx(r.ErrorMessage,{className:"text-center text-[1.3rem] font-medium text-error",errorField:"caughtError",type:"root"}),e.jsx(r.ErrorMessage,{className:"text-center text-[1.3rem] text-error",errorField:"serverError",type:"root"}),e.jsx(r.SubscribeToFormState,{render:({isSubmitting:t})=>e.jsx(b,{type:"submit",theme:"primary",disabled:t,isLoading:t,className:`mt-[2rem] h-[4.4rem] w-full rounded-[0.8rem] bg-navbar text-[1.5rem]
										font-[600] text-white shadow-sm transition-all hover:bg-primary
										hover:shadow-md active:scale-[0.98] disabled:cursor-not-allowed
										disabled:brightness-75 md:mt-[2.4rem] md:rounded-[1rem] md:text-[1.6rem]`,children:"Place Order"})})]})}),e.jsxs("aside",{className:"rounded-[0.8rem] bg-[#1c2128] p-[2rem] md:w-[50rem]",children:[e.jsx("h2",{className:"mb-[2rem] text-[1.8rem] font-[600]",children:"Order Summary"}),e.jsxs("div",{className:"flex flex-col gap-[2rem] divide-y-[1px] divide-carousel-btn",children:[e.jsx(M,{each:i,render:t=>e.jsx("div",{children:e.jsxs("div",{className:"flex gap-[1.6rem] pt-[2rem]",children:[e.jsx("div",{className:`size-[7rem] shrink-0 overflow-hidden rounded-[0.8rem]
												bg-gray-800`,children:e.jsx(C,{src:t.images[0],alt:t.title,className:"size-full object-cover"})}),e.jsxs("div",{className:"flex flex-1 justify-between gap-[1rem]",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-[1.5rem] font-[500] leading-tight",children:t.title}),e.jsxs("p",{className:"mt-[0.4rem] text-[1.3rem] text-gray-400",children:["Quantity: ",t.quantity]})]}),e.jsxs("p",{className:"shrink-0 text-[1.5rem] font-[500]",children:["$",t.price.toLocaleString()]})]})]},t.id)})}),e.jsxs("div",{className:"flex items-center justify-between pt-[2rem] text-base font-semibold",children:[e.jsx("p",{children:"Total"}),e.jsxs("p",{children:["$",l.toLocaleString()]})]})]})]})]})]})}export{Y as default};
