import{c as e,d as t,e as n,f as r,g as i}from"./proxy-BmHmfTi7.js";import{b as a,c as o,d as s,e as c,f as l,g as u,h as d}from"./form-6RV0u4YT-C0s0nzct.js";import{af as f,ai as p,ao as m,ax as h,g,h as _,r as v,u as y,y as b}from"./index-Bp9otwrI.js";import{b as x}from"./cn-BoQlC4G6.js";import{b as S,g as C}from"./button-BPLquIxT.js";import{b as w,d as T}from"./getSlot-D1_uG-Ym-BWyZ8xjg.js";import{c as E}from"./show-DNPzdLi--BP2Xi0UY.js";var D=h(p(),1),O=h(m(),1),k=class extends O.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=t.offsetParent,n=f(e)&&e.offsetWidth||0,r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft,r.right=n-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}};function A({children:t,isPresent:n,anchorX:r,root:i}){let a=(0,O.useId)(),o=(0,O.useRef)(null),s=(0,O.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=(0,O.useContext)(e);return(0,O.useInsertionEffect)(()=>{let{width:e,height:t,top:l,left:u,right:d}=s.current;if(n||!o.current||!e||!t)return;let f=r===`left`?`left: ${u}`:`right: ${d}`;o.current.dataset.motionPopId=a;let p=document.createElement(`style`);c&&(p.nonce=c);let m=i??document.head;return m.appendChild(p),p.sheet&&p.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${t}px !important;
            ${f}px !important;
            top: ${l}px !important;
          }
        `),()=>{m.removeChild(p),m.contains(p)&&m.removeChild(p)}},[n]),(0,D.jsx)(k,{isPresent:n,childRef:o,sizeRef:s,children:O.cloneElement(t,{ref:o})})}const j=({children:e,initial:n,isPresent:i,onExitComplete:a,custom:o,presenceAffectsLayout:s,mode:c,anchorX:l,root:u})=>{let d=r(M),f=(0,O.useId)(),p=!0,m=(0,O.useMemo)(()=>(p=!1,{id:f,initial:n,isPresent:i,custom:o,onExitComplete:e=>{d.set(e,!0);for(let e of d.values())if(!e)return;a&&a()},register:e=>(d.set(e,!1),()=>d.delete(e))}),[i,d,a]);return s&&p&&(m={...m}),(0,O.useMemo)(()=>{d.forEach((e,t)=>d.set(t,!1))},[i]),O.useEffect(()=>{!i&&!d.size&&a&&a()},[i]),c===`popLayout`&&(e=(0,D.jsx)(A,{isPresent:i,anchorX:l,root:u,children:e})),(0,D.jsx)(t.Provider,{value:m,children:e})};function M(){return new Map}function N(e=!0){let n=(0,O.useContext)(t);if(n===null)return[!0,null];let{isPresent:r,onExitComplete:i,register:a}=n,o=(0,O.useId)();(0,O.useEffect)(()=>{if(e)return a(o)},[e]);let s=(0,O.useCallback)(()=>e&&i&&i(o),[o,i,e]);return!r&&i?[!1,s]:[!0]}const P=e=>e.key||``;function F(e){let t=[];return O.Children.forEach(e,e=>{(0,O.isValidElement)(e)&&t.push(e)}),t}const I=({children:e,custom:t,initial:a=!0,onExitComplete:o,presenceAffectsLayout:s=!0,mode:c=`sync`,propagate:l=!1,anchorX:u=`left`,root:d})=>{let[f,p]=N(l),m=(0,O.useMemo)(()=>F(e),[e]),h=l&&!f?[]:m.map(P),g=(0,O.useRef)(!0),_=(0,O.useRef)(m),v=r(()=>new Map),[y,b]=(0,O.useState)(m),[x,S]=(0,O.useState)(m);n(()=>{g.current=!1,_.current=m;for(let e=0;e<x.length;e++){let t=P(x[e]);h.includes(t)?v.delete(t):v.get(t)!==!0&&v.set(t,!1)}},[x,h.length,h.join(`-`)]);let C=[];if(m!==y){let e=[...m];for(let t=0;t<x.length;t++){let n=x[t],r=P(n);h.includes(r)||(e.splice(t,0,n),C.push(n))}return c===`wait`&&C.length&&(e=C),S(F(e)),b(m),null}let{forceRender:w}=(0,O.useContext)(i);return(0,D.jsx)(D.Fragment,{children:x.map(e=>{let n=P(e),r=l&&!f?!1:m===x||h.includes(n),i=()=>{if(v.has(n))v.set(n,!0);else return;let e=!0;v.forEach(t=>{t||(e=!1)}),e&&(w?.(),S(_.current),l&&p?.(),o&&o())};return(0,D.jsx)(j,{isPresent:r,initial:!g.current||a?void 0:!1,custom:t,presenceAffectsLayout:s,mode:c,root:d,onExitComplete:r?void 0:i,anchorX:u,children:e},n)})})},L=Symbol(`default-value`);function R(e){let{children:t,value:n=L}=e,r=w(t,B,{errorMessage:`Only one <Switch.Default> component is allowed`,throwOnMultipleSlotMatch:!0}),i=T(t,B),a=i.find(e=>n===L?!!e.props.when:e.props.when===n);return a??r}function z(e){let{children:t,when:n}=e,r=v(t)?t(n):t;return r}function B({children:e}){return e}B.slotSymbol=Symbol(`switch-default`);var V={};C(V,{Default:()=>B,Match:()=>z,Root:()=>R});const H=l({acceptTerms:c().refine(e=>e,{error:`Please accept the terms and conditions`}),confirmPassword:u().min(1,{error:`Password confirmation is required!`}),email:d({error:`Please enter a valid email!`}),password:u().min(8,{error:`Password must be at least 8 characters!`}),username:u().min(3,{error:`Username must be at least 3 characters!`}).max(30,{error:`Username must not be more than 30 characters long`}).regex(/^(?!.*-[a-z])[A-Z]['a-z-]*(?:-[A-Z]['a-z-]*)*(?:'[A-Z]['a-z-]*)*$/,{error:`Username must be in sentence case, and can include hyphen, and apostrophes.
				A hyphen MUST be followed by an uppercase letter.
				Examples include: "Ali", "Ade-Bright" or "Smith's".`})}).strict().refine(e=>e.password===e.confirmPassword,{error:`Passwords do not match!`,path:[`confirmPassword`]}),U=l({email:u().min(1,{error:`Email is a required field`}),password:u().min(1,{error:`Password is a required field`}),rememberMe:c().optional()}).strict(),W={error:`border-b-error focus-within:border-b-error dark:focus-within:border-b-error`};function G(e){let{classNames:t,formVariant:n}=e,r=b(),i=s({resolver:o(n===`signup`?H:U)}),{control:c,handleSubmit:l,setError:u}=i,d=l(async e=>{let t=n===`signup`?`/auth/signup`:`/auth/signin`,{data:i,error:a}=await g(t,{body:e,method:`POST`});if(_(a)&&a.errorData.errors){let e=a.errorData.errors;u(`root.serverError`,{message:a.errorData.message});for(let[t,n]of Object.entries(e))u(t,{message:n});return}if(_(a)){let e=a.errorData;u(`root.serverError`,{message:e.message});return}if(a){u(`root.unCaughtError`,{message:a.message});return}if(!i.data?.user.isEmailVerified){r(`/auth/verify-email`);return}r(`/`)});return(0,D.jsxs)(a.Root,{methods:i,className:x(`mt-[25px] flex flex-col gap-[18px] [&_input]:text-[14px] lg:[&_input]:text-[16px]
				[&_label]:text-[12px]`,t?.form),onSubmit:e=>void d(e),children:[(0,D.jsx)(E.Root,{when:n===`signup`,children:(0,D.jsxs)(a.Field,{control:c,name:`username`,children:[(0,D.jsx)(a.Label,{children:`Username`}),(0,D.jsx)(a.Input,{classNames:{error:W.error,input:`min-h-[32px] border-b-2 border-b-carousel-btn bg-transparent text-input
							focus-within:border-b-navbar dark:focus-within:border-b-carousel-dot`},type:`text`}),(0,D.jsx)(a.ErrorMessage,{className:`text-error`})]})}),(0,D.jsxs)(a.Field,{control:c,name:`email`,children:[(0,D.jsx)(a.Label,{children:`Email address`}),(0,D.jsx)(a.Input,{classNames:{error:W.error,input:`min-h-[32px] border-b-2 border-b-carousel-btn bg-transparent text-input
						focus-within:border-b-navbar dark:focus-within:border-b-carousel-dot`},type:`email`}),(0,D.jsx)(a.ErrorMessage,{className:`text-error`})]}),(0,D.jsxs)(a.Field,{className:`relative`,control:c,name:`password`,children:[(0,D.jsx)(a.Label,{children:`Password`}),(0,D.jsx)(a.Input,{classNames:{error:W.error,input:`min-h-[32px]`,inputGroup:`border-b-2 border-b-carousel-btn bg-transparent text-input
						focus-within:border-b-navbar dark:focus-within:border-b-carousel-dot`},type:`password`}),(0,D.jsx)(a.ErrorMessage,{className:`text-error`})]}),(0,D.jsx)(E.Root,{when:n===`signup`,children:(0,D.jsxs)(a.Field,{className:`relative`,control:c,name:`confirmPassword`,children:[(0,D.jsx)(a.Label,{children:`Confirm Password`}),(0,D.jsx)(a.Input,{classNames:{error:W.error,inputGroup:`min-h-[32px] border-b-2 border-b-carousel-btn bg-transparent text-input
							focus-within:border-b-navbar dark:focus-within:border-b-carousel-dot`},type:`password`}),(0,D.jsx)(a.ErrorMessage,{className:`text-error`})]})}),(0,D.jsx)(a.ErrorMessage,{className:`mt-[-10px] mb-[-7px] text-error`,errorField:`serverError`,type:`root`}),(0,D.jsx)(a.ErrorMessage,{className:`mt-[-10px] mb-[-7px] text-error`,errorField:`unCaughtError`,type:`root`}),(0,D.jsxs)(a.Field,{className:`flex flex-row flex-wrap gap-x-[10px] text-[13px] text-input`,control:c,name:n===`signup`?`acceptTerms`:`rememberMe`,children:[(0,D.jsx)(a.Input,{type:`checkbox`}),(0,D.jsxs)(V.Root,{children:[(0,D.jsx)(V.Match,{when:n===`signin`,children:(0,D.jsx)(a.Label,{children:`Remember me`})}),(0,D.jsxs)(V.Match,{when:n===`signup`,children:[(0,D.jsx)(`div`,{className:`flex`,children:(0,D.jsxs)(a.Label,{children:[`I agree to all`,(0,D.jsx)(y,{className:`ml-[5px] font-medium underline hover:text-[hsl(214,89%,53%)]`,to:`#terms`,children:`Terms & Conditions`})]})}),(0,D.jsx)(a.ErrorMessage,{className:`text-error`})]})]})]}),(0,D.jsx)(a.SubscribeToFormState,{render:({isSubmitting:e})=>(0,D.jsx)(S,{className:x(`mt-[15px] rounded-[10px] text-[17px] font-semibold`,e&&`cursor-not-allowed brightness-[0.5]`),isLoading:e,disabled:e,theme:`secondary`,type:`submit`,children:n===`signin`?`Sign In`:`Sign Up`})})]})}var K=G;export{K as b,I as c};