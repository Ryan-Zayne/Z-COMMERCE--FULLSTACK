import{G as p,H as m,I as y,t as o}from"./index-BwfLVWqJ.js";const d=a=>{const s=p(a),t=e=>m(s,e);return Object.assign(t,s),t},P=a=>a?d(a):d,n={added:"Product added successfully",removed:"Product was removed from cart",updated:"Item quantity has been updated"},h=(a,s)=>({cart:[],wishList:[],totalPrice:0,getTotalPrice:()=>s().cart.reduce((t,e)=>t+e.price*e.quantity,0),actions:{addToCart:t=>{const{cart:e}=s();if(e.some(r=>r.id===t.id)){const{incrementProductQuantity:r}=s().actions;r(t.id);return}a({cart:[...e,{...t,quantity:1}]}),o.success(n.added,{position:"top-center"})},clearCart:()=>a({cart:[]}),decrementProductQuantity:t=>{const{removeProductFromCart:e,updateProductQuantity:i}=s().actions,r=s().cart.find(c=>c.id===t);if(r){if(r.quantity===1){e(t);return}i(t,{updatedQuantity:r.quantity-1}),o.success(n.updated,{position:"top-center"})}},incrementProductQuantity:t=>{const{updateProductQuantity:e}=s().actions,i=s().cart.find(r=>r.id===t);!i||i.quantity>=i.stock||(e(t,{updatedQuantity:i.quantity+1}),o.success(n.updated,{position:"top-center"}))},removeProductFromCart:t=>{const e=s().cart.filter(i=>i.id!==t);a({cart:e}),o.success(n.removed,{position:"top-center"})},toggleAddToWishList:t=>{const{wishList:e}=s(),r=e.some(c=>c.id===t.id)?e.filter(c=>c.id!==t.id):[...e,t];a({wishList:r})},updateProductQuantity:(t,{updatedQuantity:e})=>{const i=s().cart.map(r=>r.id===t?{...r,quantity:e>1?e:r.quantity}:r);a({cart:i})}}}),u=P(y(h,{name:"shop",partialize:({actions:a,...s})=>s,version:1}));u.subscribe.withSelector(a=>a.cart,()=>u.setState({totalPrice:u.getState().getTotalPrice()}),{fireListenerImmediately:!0});export{u};
