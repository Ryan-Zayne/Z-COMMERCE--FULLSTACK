import{H as e,Y as t,al as n,ao as r,ap as i,ax as a}from"./index-Bp9otwrI.js";var o=a(r());const s=t=>{let n=i(t),r=t=>e(n,t);return Object.assign(r,n),r},c=e=>e?s(e):s,l={added:`Product added successfully`,removed:`Product was removed from cart`,updated:`Item quantity has been updated`},u=(e,n)=>({cart:[],wishList:[],totalPrice:0,getTotalPrice:()=>n().cart.reduce((e,t)=>e+t.price*t.quantity,0),actions:{addToCart:r=>{let{cart:i}=n(),a=i.some(e=>e.id===r.id);if(a){let{incrementProductQuantity:e}=n().actions;e(r.id);return}e({cart:[...i,{...r,quantity:1}]}),t.success(l.added,{position:`top-center`})},clearCart:()=>e({cart:[]}),decrementProductQuantity:e=>{let{removeProductFromCart:r,updateProductQuantity:i}=n().actions,a=n().cart.find(t=>t.id===e);if(a){if(a.quantity===1){r(e);return}i(e,{updatedQuantity:a.quantity-1}),t.success(l.updated,{position:`top-center`})}},incrementProductQuantity:e=>{let{updateProductQuantity:r}=n().actions,i=n().cart.find(t=>t.id===e);!i||i.quantity>=i.stock||(r(e,{updatedQuantity:i.quantity+1}),t.success(l.updated,{position:`top-center`}))},removeProductFromCart:r=>{let i=n().cart.filter(e=>e.id!==r);e({cart:i}),t.success(l.removed,{position:`top-center`})},toggleAddToWishList:t=>{let{wishList:r}=n(),i=r.some(e=>e.id===t.id),a=i?r.filter(e=>e.id!==t.id):[...r,t];e({wishList:a})},updateProductQuantity:(t,{updatedQuantity:r})=>{let i=n().cart.map(e=>e.id===t?{...e,quantity:r>1?r:e.quantity}:e);e({cart:i})}}}),d=c(n(u,{name:`shop`,partialize:({actions:e,...t})=>t,version:1}));d.subscribe.withSelector(e=>e.cart,()=>d.setState({totalPrice:d.getState().getTotalPrice()}),{fireListenerImmediately:!0});export{d as b};