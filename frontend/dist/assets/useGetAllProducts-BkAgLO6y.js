var U=n=>{throw TypeError(n)};var q=(n,s,e)=>s.has(n)||U("Cannot "+e);var i=(n,s,e)=>(q(n,s,"read from private field"),e?e.call(n):s.get(n)),y=(n,s,e)=>s.has(n)?U("Cannot add the same private member more than once"):s instanceof WeakSet?s.add(n):s.set(n,e),l=(n,s,e,r)=>(q(n,s,"write to private field"),r?r.call(n,e):s.set(n,e),e),b=(n,s,e)=>(q(n,s,"access private method"),e);import{y as j,z as A,A as J,B as N,r as C,C as X,D as Y}from"./index-CtoIyiXC.js";import{Q as V,u as Z,a as $,e as W,b as ss,c as es,n as ts,s as F,f as G,w as rs,g as ns}from"./suspense-CbsXQd16.js";function K(n,s){return n.filter(e=>!s.includes(e))}function os(n,s,e){const r=n.slice(0);return r[s]=e,r}var R,f,E,Q,p,v,P,m,S,h,x,k,B,H,L,T,is=(T=class extends j{constructor(s,e,r){super();y(this,h);y(this,R);y(this,f);y(this,E);y(this,Q);y(this,p);y(this,v);y(this,P);y(this,m);y(this,S,[]);l(this,R,s),l(this,Q,r),l(this,E,[]),l(this,p,[]),l(this,f,[]),this.setQueries(e)}onSubscribe(){this.listeners.size===1&&i(this,p).forEach(s=>{s.subscribe(e=>{b(this,h,H).call(this,s,e)})})}onUnsubscribe(){this.listeners.size||this.destroy()}destroy(){this.listeners=new Set,i(this,p).forEach(s=>{s.destroy()})}setQueries(s,e){l(this,E,s),l(this,Q,e),A.batch(()=>{const r=i(this,p),u=b(this,h,B).call(this,i(this,E));l(this,S,u),u.forEach(a=>a.observer.setOptions(a.defaultedQueryOptions));const o=u.map(a=>a.observer),c=o.map(a=>a.getCurrentResult()),t=o.some((a,w)=>a!==r[w]);r.length===o.length&&!t||(l(this,p,o),l(this,f,c),this.hasListeners()&&(K(r,o).forEach(a=>{a.destroy()}),K(o,r).forEach(a=>{a.subscribe(w=>{b(this,h,H).call(this,a,w)})}),b(this,h,L).call(this)))})}getCurrentResult(){return i(this,f)}getQueries(){return i(this,p).map(s=>s.getCurrentQuery())}getObservers(){return i(this,p)}getOptimisticResult(s,e){const r=b(this,h,B).call(this,s),u=r.map(o=>o.observer.getOptimisticResult(o.defaultedQueryOptions));return[u,o=>b(this,h,k).call(this,o??u,e),()=>b(this,h,x).call(this,u,r)]}},R=new WeakMap,f=new WeakMap,E=new WeakMap,Q=new WeakMap,p=new WeakMap,v=new WeakMap,P=new WeakMap,m=new WeakMap,S=new WeakMap,h=new WeakSet,x=function(s,e){return e.map((r,u)=>{const o=s[u];return r.defaultedQueryOptions.notifyOnChangeProps?o:r.observer.trackResult(o,c=>{e.forEach(t=>{t.observer.trackProp(c)})})})},k=function(s,e){return e?((!i(this,v)||i(this,f)!==i(this,m)||e!==i(this,P))&&(l(this,P,e),l(this,m,i(this,f)),l(this,v,J(i(this,v),e(s)))),i(this,v)):s},B=function(s){const e=new Map(i(this,p).map(u=>[u.options.queryHash,u])),r=[];return s.forEach(u=>{const o=i(this,R).defaultQueryOptions(u),c=e.get(o.queryHash);c?r.push({defaultedQueryOptions:o,observer:c}):r.push({defaultedQueryOptions:o,observer:new V(i(this,R),o)})}),r},H=function(s,e){const r=i(this,p).indexOf(s);r!==-1&&(l(this,f,os(i(this,f),r,e)),b(this,h,L).call(this))},L=function(){var s;if(this.hasListeners()){const e=i(this,v),r=b(this,h,x).call(this,i(this,f),i(this,S)),u=b(this,h,k).call(this,r,(s=i(this,Q))==null?void 0:s.combine);e!==u&&A.batch(()=>{this.listeners.forEach(o=>{o(i(this,f))})})}},T);function us({queries:n,...s},e){const r=N(),u=Z(),o=$(),c=C.useMemo(()=>n.map(d=>{const O=r.defaultQueryOptions(d);return O._optimisticResults=u?"isRestoring":"optimistic",O}),[n,r,u]);c.forEach(d=>{W(d),ss(d,o)}),es(o);const[t]=C.useState(()=>new is(r,c,s)),[a,w,_]=t.getOptimisticResult(c,s.combine),z=!u&&s.subscribed!==!1;C.useSyncExternalStore(C.useCallback(d=>z?t.subscribe(A.batchCalls(d)):ts,[t,z]),()=>t.getCurrentResult(),()=>t.getCurrentResult()),C.useEffect(()=>{t.setQueries(c,s)},[c,s,t]);const D=a.some((d,O)=>F(c[O],d))?a.flatMap((d,O)=>{const g=c[O];if(g){const I=new V(r,g);if(F(g,d))return G(g,I,o);rs(d,u)&&G(g,I,o)}return[]}):[];if(D.length>0)throw Promise.all(D);const M=a.find((d,O)=>{const g=c[O];return g&&ns({result:d,errorResetBoundary:o,throwOnError:g.throwOnError,query:r.getQueryCache().get(g.queryHash),suspense:g.suspense})});if(M!=null&&M.error)throw M.error;return w(_())}const ds=()=>{const{data:n,isError:s,isPending:e}=us({combine:t=>({data:t.flatMap(a=>a.data),isError:t.some(a=>a.isError),isPending:t.some(a=>a.isPending)}),queries:X.map(t=>Y(t))}),r=n.filter(t=>(t==null?void 0:t.category)==="smartphones"),u=n.filter(t=>(t==null?void 0:t.category)==="laptops"),o=[...n.filter(t=>(t==null?void 0:t.category)==="motorcycle"),...n.filter(t=>(t==null?void 0:t.category)==="automotive")],c=[...n.filter(t=>(t==null?void 0:t.category)==="mens-watches"),...n.filter(t=>(t==null?void 0:t.category)==="womens-watches")];return{allProductsArray:n,hotSalesProductsArray:u,isError:s,isPending:e,recentlyViewedProductsArray:r,vehiclesProductsArray:o,watchesProductsArray:c}};export{ds as u};
