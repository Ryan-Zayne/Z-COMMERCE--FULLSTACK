import{S as K,s as T,v as $,w as P,x as N,y as X,z as Y,D as Z,E as A,F as ee,H as k,J as D,K as te,M as se,r as Q,N as re,R as O,u as ne,j as l,k as ie,t as j,O as ae,P as ue}from"./index-6cc12db6.js";class oe extends K{constructor(e,t){super(),this.client=e,this.options=t,this.trackedProps=new Set,this.selectError=null,this.bindMethods(),this.setOptions(t)}bindMethods(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.currentQuery.addObserver(this),L(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return F(this.currentQuery,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return F(this.currentQuery,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.clearStaleTimeout(),this.clearRefetchInterval(),this.currentQuery.removeObserver(this)}setOptions(e,t){const r=this.options,u=this.currentQuery;if(this.options=this.client.defaultQueryOptions(e),T(r,this.options)||this.client.getQueryCache().notify({type:"observerOptionsUpdated",query:this.currentQuery,observer:this}),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=r.queryKey),this.updateQuery();const n=this.hasListeners();n&&_(this.currentQuery,u,this.options,r)&&this.executeFetch(),this.updateResult(t),n&&(this.currentQuery!==u||this.options.enabled!==r.enabled||this.options.staleTime!==r.staleTime)&&this.updateStaleTimeout();const o=this.computeRefetchInterval();n&&(this.currentQuery!==u||this.options.enabled!==r.enabled||o!==this.currentRefetchInterval)&&this.updateRefetchInterval(o)}getOptimisticResult(e){const t=this.client.getQueryCache().build(this.client,e),r=this.createResult(t,e);return ce(this,r,e)&&(this.currentResult=r,this.currentResultOptions=this.options,this.currentResultState=this.currentQuery.state),r}getCurrentResult(){return this.currentResult}trackResult(e){const t={};return Object.keys(e).forEach(r=>{Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:()=>(this.trackedProps.add(r),e[r])})}),t}getCurrentQuery(){return this.currentQuery}remove(){this.client.getQueryCache().remove(this.currentQuery)}refetch({refetchPage:e,...t}={}){return this.fetch({...t,meta:{refetchPage:e}})}fetchOptimistic(e){const t=this.client.defaultQueryOptions(e),r=this.client.getQueryCache().build(this.client,t);return r.isFetchingOptimistic=!0,r.fetch().then(()=>this.createResult(r,t))}fetch(e){var t;return this.executeFetch({...e,cancelRefetch:(t=e.cancelRefetch)!=null?t:!0}).then(()=>(this.updateResult(),this.currentResult))}executeFetch(e){this.updateQuery();let t=this.currentQuery.fetch(this.options,e);return e!=null&&e.throwOnError||(t=t.catch($)),t}updateStaleTimeout(){if(this.clearStaleTimeout(),P||this.currentResult.isStale||!N(this.options.staleTime))return;const t=X(this.currentResult.dataUpdatedAt,this.options.staleTime)+1;this.staleTimeoutId=setTimeout(()=>{this.currentResult.isStale||this.updateResult()},t)}computeRefetchInterval(){var e;return typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.currentResult.data,this.currentQuery):(e=this.options.refetchInterval)!=null?e:!1}updateRefetchInterval(e){this.clearRefetchInterval(),this.currentRefetchInterval=e,!(P||this.options.enabled===!1||!N(this.currentRefetchInterval)||this.currentRefetchInterval===0)&&(this.refetchIntervalId=setInterval(()=>{(this.options.refetchIntervalInBackground||Y.isFocused())&&this.executeFetch()},this.currentRefetchInterval))}updateTimers(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())}clearStaleTimeout(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)}clearRefetchInterval(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)}createResult(e,t){const r=this.currentQuery,u=this.options,n=this.currentResult,o=this.currentResultState,c=this.currentResultOptions,v=e!==r,i=v?e.state:this.currentQueryInitialState,d=v?this.currentResult:this.previousQueryResult,{state:h}=e;let{dataUpdatedAt:f,error:a,errorUpdatedAt:p,fetchStatus:m,status:g}=h,S=!1,E=!1,y;if(t._optimisticResults){const b=this.hasListeners(),M=!b&&L(e,t),G=b&&_(e,r,t,u);(M||G)&&(m=Z(e.options.networkMode)?"fetching":"paused",f||(g="loading")),t._optimisticResults==="isRestoring"&&(m="idle")}if(t.keepPreviousData&&!h.dataUpdatedAt&&d!=null&&d.isSuccess&&g!=="error")y=d.data,f=d.dataUpdatedAt,g=d.status,S=!0;else if(t.select&&typeof h.data<"u")if(n&&h.data===(o==null?void 0:o.data)&&t.select===this.selectFn)y=this.selectResult;else try{this.selectFn=t.select,y=t.select(h.data),y=A(n==null?void 0:n.data,y,t),this.selectResult=y,this.selectError=null}catch(b){this.selectError=b}else y=h.data;if(typeof t.placeholderData<"u"&&typeof y>"u"&&g==="loading"){let b;if(n!=null&&n.isPlaceholderData&&t.placeholderData===(c==null?void 0:c.placeholderData))b=n.data;else if(b=typeof t.placeholderData=="function"?t.placeholderData():t.placeholderData,t.select&&typeof b<"u")try{b=t.select(b),this.selectError=null}catch(M){this.selectError=M}typeof b<"u"&&(g="success",y=A(n==null?void 0:n.data,b,t),E=!0)}this.selectError&&(a=this.selectError,y=this.selectResult,p=Date.now(),g="error");const R=m==="fetching",C=g==="loading",w=g==="error";return{status:g,fetchStatus:m,isLoading:C,isSuccess:g==="success",isError:w,isInitialLoading:C&&R,data:y,dataUpdatedAt:f,error:a,errorUpdatedAt:p,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>i.dataUpdateCount||h.errorUpdateCount>i.errorUpdateCount,isFetching:R,isRefetching:R&&!C,isLoadingError:w&&h.dataUpdatedAt===0,isPaused:m==="paused",isPlaceholderData:E,isPreviousData:S,isRefetchError:w&&h.dataUpdatedAt!==0,isStale:U(e,t),refetch:this.refetch,remove:this.remove}}updateResult(e){const t=this.currentResult,r=this.createResult(this.currentQuery,this.options);if(this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,T(r,t))return;this.currentResult=r;const u={cache:!0},n=()=>{if(!t)return!0;const{notifyOnChangeProps:o}=this.options,c=typeof o=="function"?o():o;if(c==="all"||!c&&!this.trackedProps.size)return!0;const v=new Set(c??this.trackedProps);return this.options.useErrorBoundary&&v.add("error"),Object.keys(this.currentResult).some(i=>{const d=i;return this.currentResult[d]!==t[d]&&v.has(d)})};(e==null?void 0:e.listeners)!==!1&&n()&&(u.listeners=!0),this.notify({...u,...e})}updateQuery(){const e=this.client.getQueryCache().build(this.client,this.options);if(e===this.currentQuery)return;const t=this.currentQuery;this.currentQuery=e,this.currentQueryInitialState=e.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(t==null||t.removeObserver(this),e.addObserver(this))}onQueryUpdate(e){const t={};e.type==="success"?t.onSuccess=!e.manual:e.type==="error"&&!ee(e.error)&&(t.onError=!0),this.updateResult(t),this.hasListeners()&&this.updateTimers()}notify(e){k.batch(()=>{if(e.onSuccess){var t,r,u,n;(t=(r=this.options).onSuccess)==null||t.call(r,this.currentResult.data),(u=(n=this.options).onSettled)==null||u.call(n,this.currentResult.data,null)}else if(e.onError){var o,c,v,i;(o=(c=this.options).onError)==null||o.call(c,this.currentResult.error),(v=(i=this.options).onSettled)==null||v.call(i,void 0,this.currentResult.error)}e.listeners&&this.listeners.forEach(({listener:d})=>{d(this.currentResult)}),e.cache&&this.client.getQueryCache().notify({query:this.currentQuery,type:"observerResultsUpdated"})})}}function le(s,e){return e.enabled!==!1&&!s.state.dataUpdatedAt&&!(s.state.status==="error"&&e.retryOnMount===!1)}function L(s,e){return le(s,e)||s.state.dataUpdatedAt>0&&F(s,e,e.refetchOnMount)}function F(s,e,t){if(e.enabled!==!1){const r=typeof t=="function"?t(s):t;return r==="always"||r!==!1&&U(s,e)}return!1}function _(s,e,t,r){return t.enabled!==!1&&(s!==e||r.enabled===!1)&&(!t.suspense||s.state.status!=="error")&&U(s,t)}function U(s,e){return s.isStaleByTime(e.staleTime)}function ce(s,e,t){return t.keepPreviousData?!1:t.placeholderData!==void 0?e.isPlaceholderData:!T(s.getCurrentResult(),e)}class he extends K{constructor(e,t){super(),this.client=e,this.queries=[],this.result=[],this.observers=[],this.observersMap={},t&&this.setQueries(t)}onSubscribe(){this.listeners.size===1&&this.observers.forEach(e=>{e.subscribe(t=>{this.onUpdate(e,t)})})}onUnsubscribe(){this.listeners.size||this.destroy()}destroy(){this.listeners=new Set,this.observers.forEach(e=>{e.destroy()})}setQueries(e,t){this.queries=e,k.batch(()=>{const r=this.observers,u=this.findMatchingObservers(this.queries);u.forEach(i=>i.observer.setOptions(i.defaultedQueryOptions,t));const n=u.map(i=>i.observer),o=Object.fromEntries(n.map(i=>[i.options.queryHash,i])),c=n.map(i=>i.getCurrentResult()),v=n.some((i,d)=>i!==r[d]);r.length===n.length&&!v||(this.observers=n,this.observersMap=o,this.result=c,this.hasListeners()&&(D(r,n).forEach(i=>{i.destroy()}),D(n,r).forEach(i=>{i.subscribe(d=>{this.onUpdate(i,d)})}),this.notify()))})}getCurrentResult(){return this.result}getQueries(){return this.observers.map(e=>e.getCurrentQuery())}getObservers(){return this.observers}getOptimisticResult(e){return this.findMatchingObservers(e).map(t=>t.observer.getOptimisticResult(t.defaultedQueryOptions))}findMatchingObservers(e){const t=this.observers,r=new Map(t.map(a=>[a.options.queryHash,a])),u=e.map(a=>this.client.defaultQueryOptions(a)),n=u.flatMap(a=>{const p=r.get(a.queryHash);return p!=null?[{defaultedQueryOptions:a,observer:p}]:[]}),o=new Set(n.map(a=>a.defaultedQueryOptions.queryHash)),c=u.filter(a=>!o.has(a.queryHash)),v=new Set(n.map(a=>a.observer)),i=t.filter(a=>!v.has(a)),d=a=>{const p=this.client.defaultQueryOptions(a),m=this.observersMap[p.queryHash];return m??new oe(this.client,p)},h=c.map((a,p)=>{if(a.keepPreviousData){const m=i[p];if(m!==void 0)return{defaultedQueryOptions:a,observer:m}}return{defaultedQueryOptions:a,observer:d(a)}}),f=(a,p)=>u.indexOf(a.defaultedQueryOptions)-u.indexOf(p.defaultedQueryOptions);return n.concat(h).sort(f)}onUpdate(e,t){const r=this.observers.indexOf(e);r!==-1&&(this.result=te(this.result,r,t),this.notify())}notify(){k.batch(()=>{this.listeners.forEach(({listener:e})=>{e(this.result)})})}}const de=se.useSyncExternalStore,z=Q.createContext(!1),fe=()=>Q.useContext(z);z.Provider;function pe(){let s=!1;return{clearReset:()=>{s=!1},reset:()=>{s=!0},isReset:()=>s}}const me=Q.createContext(pe()),ye=()=>Q.useContext(me);function ve(s,e){return typeof s=="function"?s(...e):!!s}const be=(s,e)=>{(s.suspense||s.useErrorBoundary)&&(e.isReset()||(s.retryOnMount=!1))},ge=s=>{Q.useEffect(()=>{s.clearReset()},[s])},Re=({result:s,errorResetBoundary:e,useErrorBoundary:t,query:r})=>s.isError&&!e.isReset()&&!s.isFetching&&ve(t,[s.error,r]),xe=s=>{s.suspense&&typeof s.staleTime!="number"&&(s.staleTime=1e3)},V=(s,e)=>s.isLoading&&s.isFetching&&!e,q=(s,e,t)=>(s==null?void 0:s.suspense)&&V(e,t),B=(s,e,t)=>e.fetchOptimistic(s).then(({data:r})=>{s.onSuccess==null||s.onSuccess(r),s.onSettled==null||s.onSettled(r,null)}).catch(r=>{t.clearReset(),s.onError==null||s.onError(r),s.onSettled==null||s.onSettled(void 0,r)});function Oe({queries:s,context:e}){const t=re({context:e}),r=fe(),u=ye(),n=Q.useMemo(()=>s.map(f=>{const a=t.defaultQueryOptions(f);return a._optimisticResults=r?"isRestoring":"optimistic",a}),[s,t,r]);n.forEach(f=>{xe(f),be(f,u)}),ge(u);const[o]=Q.useState(()=>new he(t,n)),c=o.getOptimisticResult(n);de(Q.useCallback(f=>r?()=>{}:o.subscribe(k.batchCalls(f)),[o,r]),()=>o.getCurrentResult(),()=>o.getCurrentResult()),Q.useEffect(()=>{o.setQueries(n,{listeners:!1})},[n,o]);const i=c.some((f,a)=>q(n[a],f,r))?c.flatMap((f,a)=>{const p=n[a],m=o.getObservers()[a];if(p&&m){if(q(p,f,r))return B(p,m,u);V(f,r)&&B(p,m,u)}return[]}):[];if(i.length>0)throw Promise.all(i);const d=o.getQueries(),h=c.find((f,a)=>{var p,m;return Re({result:f,errorResetBoundary:u,useErrorBoundary:(p=(m=n[a])==null?void 0:m.useErrorBoundary)!=null?p:!1,query:d[a]})});if(h!=null&&h.error)throw h.error;return c}const W=O.createContext({}),J=!0;function Qe({baseColor:s,highlightColor:e,width:t,height:r,borderRadius:u,circle:n,direction:o,duration:c,enableAnimation:v=J}){const i={};return o==="rtl"&&(i["--animation-direction"]="reverse"),typeof c=="number"&&(i["--animation-duration"]=`${c}s`),v||(i["--pseudo-element-display"]="none"),(typeof t=="string"||typeof t=="number")&&(i.width=t),(typeof r=="string"||typeof r=="number")&&(i.height=r),(typeof u=="string"||typeof u=="number")&&(i.borderRadius=u),n&&(i.borderRadius="50%"),typeof s<"u"&&(i["--base-color"]=s),typeof e<"u"&&(i["--highlight-color"]=e),i}function x({count:s=1,wrapper:e,className:t,containerClassName:r,containerTestId:u,circle:n=!1,style:o,...c}){var v,i,d;const h=O.useContext(W),f={...c};for(const[y,R]of Object.entries(c))typeof R>"u"&&delete f[y];const a={...h,...f,circle:n},p={...o,...Qe(a)};let m="react-loading-skeleton";t&&(m+=` ${t}`);const g=(v=a.inline)!==null&&v!==void 0?v:!1,S=[],E=Math.ceil(s);for(let y=0;y<E;y++){let R=p;if(E>s&&y===E-1){const w=(i=R.width)!==null&&i!==void 0?i:"100%",I=s%1,b=typeof w=="number"?w*I:`calc(${w} * ${I})`;R={...R,width:b}}const C=O.createElement("span",{className:m,style:R,key:y},"‌");g?S.push(C):S.push(O.createElement(O.Fragment,{key:y},C,O.createElement("br",null)))}return O.createElement("span",{className:r,"data-testid":u,"aria-live":"polite","aria-busy":(d=a.enableAnimation)!==null&&d!==void 0?d:J},e?S.map((y,R)=>O.createElement(e,{key:R},y)):S)}function H({children:s,...e}){return O.createElement(W.Provider,{value:e},s)}function je({count:s=5,itemDescription:e=!1}){const t=ne(u=>u.isDarkMode),r=[...Array(s).keys()].map(u=>l.jsx("li",{className:ie(`w-[min(100%,25rem)] rounded-[1.2rem] bg-white/[0.17] box-shadow-[0_0_3px_hsl(60,_100%,_0%,_0.3)] ${t&&"bg-[hsl(200,5.88%,10%,0.17)]"}`),children:l.jsxs(H,{highlightColor:j(t&&"#1e2021"),baseColor:j(t&&"#232628"),children:[l.jsx("div",{children:l.jsx(x,{className:"block h-[18rem] w-full rounded-[0.8rem_0.8rem_0_0]"})}),l.jsxs("div",{className:"px-[1.4rem] pb-[1rem]",children:[l.jsxs("header",{className:"flex items-center justify-between gap-[1rem]",children:[l.jsx(x,{count:2,width:148,height:6}),l.jsx("span",{children:l.jsx(x,{width:58,height:23})})]}),l.jsx("p",{className:"mt-[2rem]",children:l.jsx(x,{className:"gap-[3rem]",count:3,width:"93%",height:6})}),l.jsxs("div",{className:"mt-[1rem] flex items-center gap-[1.3rem]",children:[l.jsx(x,{width:75,height:19}),l.jsx(x,{width:34,height:18})]}),l.jsx(x,{className:"mt-[2rem] rounded-[8px] p-[1rem_1.2rem]",width:97,height:35})]})]})},u));return e?l.jsx("section",{className:"p-[1rem_2rem_3rem] lg:pt-[3rem]",children:l.jsx("div",{className:"mt-[3rem] flex flex-col items-center gap-[4rem] overflow-hidden md:mt-[4.5rem] md:h-[47rem] md:flex-row md:items-start md:justify-around md:px-[1rem] lg:mt-[6rem] lg:gap-[8rem]",children:l.jsxs(H,{highlightColor:j(t&&"#1e2021"),baseColor:j(t&&"#232628"),children:[l.jsx(x,{className:"h-[35rem] w-[40rem] md:h-full lg:w-full"}),l.jsx(x,{className:"h-[47rem] w-[46rem] max-md:mx-auto"})]})})}):l.jsx("section",{className:"mt-[8rem] flex flex-col gap-[6rem] pt-[6rem]",children:l.jsx("article",{className:"flex flex-col gap-[3rem] px-[3rem]",children:l.jsx("ul",{className:"grid grid-cols-[repeat(auto-fit,_minmax(23rem,1fr))] justify-items-center gap-[3rem_1.5rem]",children:r})})})}function ke({rating:s,text:e="",className:t="",icon:r=ae}){const u=[...Array(5).keys()].map(o=>l.jsx(r,{color:"var(--text-header)"},o)),n=[...Array(5).keys()].map((o,c)=>c===4?l.jsx(r,{color:"var(--text-dark)"},o):l.jsx(r,{color:"var(--text-header)"},o));return l.jsxs("div",{className:`mt-[1rem] flex items-center gap-[1rem] text-[1.2rem] ${t}`,children:[l.jsx("span",{className:"flex",children:s>4.5?u:n}),l.jsxs("span",{children:[s," ",e]})]})}const Se=async s=>{const e=await fetch(`${ue}/${s}`);if(!e.ok)throw new Error("Sorry, something went wrong");return e.json()},we=s=>s.products,Ee=s=>Oe({queries:s}),Ie=()=>{const e=Ee([{key:["smartphones"],url:"products/category/smartphones"},{key:["laptops"],url:"products/category/laptops"},{key:["mens-watches"],url:"products/category/mens-watches"},{key:["womens-watches"],url:"products/category/womens-watches"},{key:["automotive"],url:"products/category/automotive"},{key:["motorcycle"],url:"products/category/motorcycle"},{key:["lighting"],url:"products/category/lighting"}].map(n=>({queryKey:n.key,queryFn:()=>Se(n.url),select:we}))),t=e.some(n=>n.isLoading),r=e.some(n=>n.isError),u=e.flatMap(n=>n.data).filter(n=>(n==null?void 0:n.id)!==3);return{isLoading:t,isError:r,allProductsArray:u}};export{je as L,ke as S,Ie as u};
